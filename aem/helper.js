"use strict";"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(prefix){return this.slice(0,prefix.length)==prefix});var siteStatus,site_AEM="https://aem.samsung.com/",site_QA="https://qaweb.samsung.com/",site_Live="https://www.samsung.com/",site_CreateTask="https://aem.samsung.com/aem/taskmanagement/create",site_AEMEditor="https://aem.samsung.com/editor.html/content/samsung/",status_AEM="AEM",status_QA="QA",status_Live="LIVE",status_Local="LOCAL",lang,path,routerHK="/hk/",routerEN="/hk_en/";window.location.href.indexOf(routerHK)>-1&&(lang="hk"),window.location.href.indexOf(routerEN)>-1&&(lang="hk_en"),document.location.href.startsWith(site_AEM)?(siteStatus=status_AEM,path=window.location.href.replace(site_AEM,"")):document.location.href.startsWith(site_Live)?(siteStatus=site_Live,path=window.location.href.replace(site_Live,"")):document.location.href.startsWith(site_QA)?(siteStatus=status_QA,path=window.location.href.replace(site_QA,"")):(siteStatus=status_Local,"hk"==lang?path=window.location.href.replace(/.*(?=\/hk)/i,""):"hk_en"==lang&&(path=window.location.href.replace(/.*(?=\/hk_en)/i,""))),console.log(siteStatus);var element=document.getElementById("cpt-btns");if(void 0!==element&&null!=element)console.log("already opened");else{var style=document.createElement("link"),ref=document.querySelector("script");setAttributes(style,{id:"cpt-style",href:"https://leviheo.github.io/aem/helper.css",rel:"stylesheet",type:"text/css"}),ref.parentNode.insertBefore(style,ref);var pageTit=document.querySelector("title").innerHTML,pageDesc=getMeta("description"),pageKeyword=getMeta("keywords"),pageSitecode=lang;function btnDiv(txt,func,param){return'<div class="btns-item" onclick="javascript:'+func+"("+param+');">'+txt+"</div>"}var btn_PreviewAEM=btnDiv("Preview AEM","openPreviewAEM"),btn_PreviewQA=btnDiv("Preview QA","openPreviewQA"),btn_SwitchLang=btnDiv("Switch Language","switchLang"),btn_CreateTask=btnDiv("Create Task","createTask"),btn_ViewTask=btnDiv("View Task","viewTask"),btn_SearchTask=btnDiv("Search Task","searchTask"),btn_AutoInputTaskHK=btnDiv("Auto Input Task(HK)","AutoInpuTask","hk"),btn_AutoInputTaskEN=btnDiv("Auto Input Task(HK_EN)","AutoInpuTask","hk_en");function detailRow(list,data){return'<div class="cpt-detail-row"><div class="cpt-detail-dh">'+list+'</div><div class="cpt-detail-dt">'+data+"</div></div>"}var info_status=detailRow("Status",siteStatus),info_description=detailRow("Description",pageDesc),info_keyword=detailRow("Keyword",pageKeyword),info_sitecode=detailRow("Sitecode",pageSitecode),btns=document.createElement("div");setAttributes(btns,{id:"cpt-btns"});var btnsCont='<div class="btns-inner"><div id="cpt-info"><div class="cpt-tit">'+pageTit+'</div><div class="cpt-detail">'+info_status+info_sitecode+info_description+info_keyword;btnsCont+='<div class="cpt-detail-row"><div class="cpt-detail-dh">Mobile</div><div class="cpt-detail-dt"><div class="cpt-detail-qr"><div class="cpt-qr-item"><div class="cpt-qr-item_tit">QA</div><div class="cpt-qr-item_img"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+site_QA+lang+"/"+path+'"/></div></div><div class="cpt-qr-item"><div class="cpt-qr-item_tit">Live</div><div class="cpt-qr-item_img"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+site_Live+lang+"/"+path+'"/></div></div></div></div></div></div></div><div id="cpt-btnlist"><div>',document.location.href.startsWith(site_AEMEditor)&&(btnsCont+=btn_PreviewAEM+btn_PreviewQA),btnsCont+=btn_SwitchLang+btn_CreateTask,document.location.href.startsWith(site_CreateTask)&&(btnsCont+=btn_AutoInputTaskHK+btn_AutoInputTaskEN),btnsCont+=btn_ViewTask+btn_SearchTask+"</div></div></div>",btns.innerHTML=btnsCont,document.body.appendChild(btns),setTimeout((function(){setAttributes(btns,{class:"on-active"})}),800);var infoHead=document.getElementById("cpt-info");setTimeout((function(){setAttributes(infoHead,{class:"on-active"})}),800);var btnClose=document.createElement("div");setAttributes(btnClose,{id:"cpt-close",onclick:"closePopup();"}),document.body.appendChild(btnClose);var mask=document.createElement("div");mask.setAttribute("id","cpt-mask"),document.body.appendChild(mask),setTimeout((function(){setAttributes(mask,{class:"on-active"})}),100)}function remove(me){document.getElementById(me).outerHTML=""}function setAttributes(el,attrs){for(var key in attrs)el.setAttribute(key,attrs[key])}function openPreviewAEM(){var gg="/editor.html/";if(window.location.href.indexOf(gg)>-1){var swtichlink=window.location.href.replace(gg,"/");window.open(swtichlink+"?wcmmode=disabled")}}function openPreviewQA(){var gg="https://aem.samsung.com/editor.html/content/samsung/";if(window.location.href.indexOf(gg)>-1){var swtichlink=window.location.href.replace(gg,"https://qaweb.samsung.com/");window.open(swtichlink)}}function switchLang(){var routerHK="/hk/",routerEN="/hk_en/";if(window.location.href.indexOf("/hk/")>-1){var swtichlink=window.location.href.replace("/hk/",routerEN);window.location.href=swtichlink}if(window.location.href.indexOf(routerEN)>-1){var swtichlink=window.location.href.replace(routerEN,"/hk/");window.location.href=swtichlink}}function createTask(){var uri="";"hk"==lang?uri=window.location.href.replace(/.*(?=\/hk)/i,""):"hk_en"==lang&&(uri=window.location.href.replace(/.*(?=\/hk_en)/i,"")),uri.indexOf(".html")&&(uri=uri.replace(".html",""));var createPagePath="https://aem.samsung.com/aem/taskmanagement/create";window.open(createPagePath+"?siteCode="+lang+"&path="+uri+"&title="+pageTit.split("|")[0])}function AutoInpuTask(siteCode){var QueryString=function(){for(var query_string={},query,vars=window.location.search.substring(1).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(void 0===query_string[pair[0]])query_string[pair[0]]=decodeURIComponent(pair[1]);else if("string"==typeof query_string[pair[0]]){var arr=[query_string[pair[0]],decodeURIComponent(pair[1])];query_string[pair[0]]=arr}else query_string[pair[0]].push(decodeURIComponent(pair[1]))}return query_string}(),inputPagetit=QueryString.title,inputLang=QueryString.siteCode,inputPath=QueryString.path;inputLang?$('.coral-SelectList-item--option[data-value="'+inputLang+'"]').click():$('.coral-SelectList-item--option[data-value="'+siteCode+'"]').click(),$('.coral-SelectList-item--option[id="coral-66"]').click(),setTimeout((function(){$("#dueDate").find("li.coral-SelectList-item--option").click()}),500);var today=new Date,date=today.getFullYear()+"-"+(today.getMonth()+1)+"-"+today.getDate();inputPagetit?$('input[name="requestTitle"]').val(inputPagetit+" "+date):$('input[name="requestTitle"]').val("New Task "+date),$(".coral-TabPanel-navigation").find("a:nth-child(2)").click(),$('.coral-SelectList-item--option[data-value="DP"]').click(),$('.coral-SelectList-item--option[data-value="Static"]').click(),inputPath?$('input[name="inputPath"]').val(inputPath):$('input[name="inputPath"]').focus(),inputPagetit?$('input[name="pageTitle"]').val(inputPagetit+" "+date):$('input[name="pageTitle"]').val("New Task Title")}function viewTask(){window.open("https://aem.samsung.com/notifications.html")}function searchTask(){var innerpop=document.createElement("div");innerpop.setAttribute("id","cpt-inner-pop"),innerpop.innerHTML='<div class="popups-inner"><div class="popups-tit">Please enter the Requester ID.</div><div class="popups-cont"><div class="popups-input"><input name="requester" id="find-requester" /></div></div><div class="popups-btns"><a href="javascript:closeInPopup();">Back</a></div></ div> ',document.body.appendChild(innerpop),setTimeout((function(){setAttributes(innerpop,{class:"on-active"})}),100);var inputel=document.getElementById("find-requester");inputel.focus(),inputel.addEventListener("keypress",(function(event){if(13==event.keyCode){event.preventDefault();var requester=inputel.value;window.open("https://aem.samsung.com/aem/taskmanagement?_charset_=utf-8&task=alltask&siteCode=all&taskStatus=RUNNING&searchKey=requestedBy&keyword="+requester)}}))}function closePopup(){setTimeout((function(){setAttributes(mask,{class:""}),setAttributes(btns,{class:""}),setAttributes(infoHead,{class:""})}),100),setTimeout((function(){remove("cpt-close"),remove("cpt-style"),remove("cpt-mask"),remove("cpt-btns")}),800)}function closeInPopup(){var innerpop=document.getElementById("cpt-inner-pop");setTimeout((function(){setAttributes(innerpop,{class:""})}),100),setTimeout((function(){remove("cpt-inner-pop")}),500)}function getMeta(metaName){const metas=document.getElementsByTagName("meta");for(let i=0;i<metas.length;i++)if(metas[i].getAttribute("name")===metaName)return metas[i].getAttribute("content");return""}document.onkeydown=function(){27==window.event.keyCode&&closePopup()};
